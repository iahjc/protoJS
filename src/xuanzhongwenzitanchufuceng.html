<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			*{ margin:0; padding:0;}
			.box1,.box2{ width:300px; height:auto; margin:100px;}
			.box3{ position:absolute;}
		</style>
	</head>
	<body>
		<div class="box1" id="box1">我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字我要复制的文字</div>


		<div class="box2">
			我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字 我不要的文字
		</div>

		<div class="box3">显示盒子</div>
	</body>
</html>

<script>
	function loadJs(source,callback){
		var _js = document.createElement("script");
		_js.src = source;
		document.head.appendChild(_js);
		_js.onload = function(){
			callback();
		}
	}

	loadJs("scripts/alinec.js",function(){
		document.querySelector(".box1").onmouseup = function(event){
			var event = event || window.event;
			var x = event.clientX;
			var y = event.clientY;
			var txt;
			if(window.getSelection) //获取我们选中的文字
			{
				txt = window.getSelection().toString();
			}else{
				txt = document.selection.createRange().text;
			}
			
			if(txt){
				showBox(x,y,txt);
			}

		};

		document.onmousedown = function(event){
			var event = event || window.event;
			
			var targetId = event.target ? event.target.id : event.srcElement.id;
			if(targetId != "box1"){
				document.querySelector(".box3").style.display = "none";
			}
		}

		function showBox(mousex,mousey,contentText){
			setTimeout(function() {
                    document.querySelector(".box3").style.display = "block";
                    document.querySelector(".box3").style.left = mousex + "px";
                    document.querySelector(".box3").style.top = mousey + "px";
                    document.querySelector(".box3").innerHTML = contentText;
                },200)

		}
	});


</script>